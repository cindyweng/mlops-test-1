parameters:
- name: resource_group
  type: string
- name: aml_workspace
  type: string

repositories:
  - repository: rai-vnext-preview  # Template Repo
    name: Azure/rai-vnext-preview # need to change org name from "Azure" to your own org
    endpoint: github-connection # need to set up and hardcode
    type: github
steps:
  - checkout: rai-vnext-preview
    path: s/
  - task: AzureCLI@2
    displayName: Register RAI Azure ML components
    inputs: 
      azureSubscription: $(ado_service_connection_rg) #needs to have access at the RG level 
      scriptType: bash
      scriptLocation: inlineScript
      inlineScript: |
        subscription_id=$(az account get-access-token --query tenant --output tsv)
        bash quick-setup.bash conda-env $subscription_id $${{ parameters.resource_group }} $${{ parameters.aml_workspace }}